<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Vantage - C4 Architecture Diagrams</title>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'default' });
    </script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .header {
            background: white;
            padding: 30px;
            border-radius: 8px;
            margin-bottom: 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            margin: 0;
            color: #2563EB;
        }
        .diagram-container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            margin-bottom: 40px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h2 {
            color: #1e40af;
            border-bottom: 3px solid #3b82f6;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .description {
            background: #f8fafc;
            padding: 15px;
            border-left: 4px solid #3b82f6;
            margin-bottom: 20px;
            border-radius: 4px;
        }
        .mermaid {
            background: white;
            padding: 20px;
            border-radius: 4px;
            overflow-x: auto;
        }
        .note {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 15px;
            margin-top: 20px;
            border-radius: 4px;
        }
        .toc {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .toc h3 {
            margin-top: 0;
            color: #2563EB;
        }
        .toc ul {
            list-style: none;
            padding: 0;
        }
        .toc li {
            margin: 10px 0;
        }
        .toc a {
            color: #3b82f6;
            text-decoration: none;
            font-weight: 500;
        }
        .toc a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ—ï¸ Task Vantage - C4 Architecture Diagrams</h1>
        <p>Complete system architecture documentation using C4 model</p>
    </div>

    <div class="toc">
        <h3>Table of Contents</h3>
        <ul>
            <li><a href="#c1">C1: Context Diagram</a></li>
            <li><a href="#c2">C2: Container Diagram</a></li>
            <li><a href="#c3">C3: Component Diagram</a></li>
            <li><a href="#c4">C4: Code Diagram</a></li>
        </ul>
    </div>

    <!-- C1: Context Diagram -->
    <div id="c1" class="diagram-container">
        <h2>C1: Context Diagram (System Context)</h2>
        <div class="description">
            <strong>Purpose:</strong> Shows the Task Vantage system and its relationships with external actors (users).
        </div>
        <div class="mermaid">
graph TB
    Staff[ğŸ‘¤ Staff<br/>Individual Contributors]
    Managers[ğŸ‘¤ Managers<br/>Team Leaders]
    Directors[ğŸ‘¤ Directors<br/>Department Heads]
    Senior[ğŸ‘¤ Senior Management<br/>Organization Leaders]
    HR[ğŸ‘¤ HR<br/>Human Resources]
    
    System[Task Vantage System<br/>Manages tasks, projects, teams, and organizational workflows<br/>Software System]
    
    Staff -->|HTTPS<br/>View tasks & projects<br/>Create/update tasks<br/>Apply for arrangements| System
    Managers -->|HTTPS<br/>View team schedule<br/>Approve/reject requests<br/>View department schedule| System
    Directors -->|HTTPS<br/>View team hierarchy<br/>Manage multiple teams<br/>View department reports| System
    Senior -->|HTTPS<br/>View all organization data<br/>Access all reports| System
    HR -->|HTTPS<br/>Manage user accounts<br/>View user reports| System
    
    style Staff fill:#2563EB,color:#fff
    style Managers fill:#2563EB,color:#fff
    style Directors fill:#2563EB,color:#fff
    style Senior fill:#2563EB,color:#fff
    style HR fill:#2563EB,color:#fff
    style System fill:#3B82F6,color:#fff
        </div>
        <div class="note">
            <strong>Note:</strong> This diagram shows all user roles and their interactions with the Task Vantage system. All interactions use HTTPS protocol for secure communication.
        </div>
    </div>

    <!-- C2: Container Diagram -->
    <div id="c2" class="diagram-container">
        <h2>C2: Container Diagram (Application Architecture)</h2>
        <div class="description">
            <strong>Purpose:</strong> Shows the high-level shape of the software architecture and the responsibilities of containers (applications, databases, services).
        </div>
        <div class="mermaid">
graph TB
    subgraph Boundary["Task Vantage System"]
        subgraph Users[" "]
            Staff[ğŸ‘¤ Staff]
            Managers[ğŸ‘¤ Managers]
            Directors[ğŸ‘¤ Directors]
            Senior[ğŸ‘¤ Senior Management]
            HR[ğŸ‘¤ HR]
        end
        
        Frontend[Front-End Application<br/>React/TypeScript/Vite<br/>Provides UI for task management,<br/>project tracking, and team collaboration<br/>Container: HTML/JavaScript]
        
        Auth[Firebase Authentication<br/>Firebase Auth<br/>Handles user authentication<br/>and authorization<br/>Container: Firebase Auth Service]
        
        DB[(Firestore Database<br/>Firestore<br/>Stores tasks, projects, teams,<br/>profiles, meetings data<br/>Container: Firestore NoSQL Database)]
        
        Storage[(Firebase Storage<br/>Firebase Storage<br/>Stores file attachments<br/>and user avatars<br/>Container: Firebase Storage Service)]
        
        Functions[Firebase Functions<br/>Node.js/Cloud Functions<br/>Server-side operations<br/>user deactivation, notifications<br/>Container: Firebase Cloud Functions]
    end
    
    Staff -->|HTTPS<br/>View schedule, Manage tasks<br/>Approve/reject requests| Frontend
    Managers -->|HTTPS| Frontend
    Directors -->|HTTPS| Frontend
    Senior -->|HTTPS| Frontend
    HR -->|HTTPS| Frontend
    
    Frontend -->|API requests<br/>Authenticate users| Auth
    Frontend -->|read/write<br/>CRUD operations<br/>Firebase SDK| DB
    Frontend -->|upload/download<br/>File operations| Storage
    Frontend -->|API requests<br/>Server-side operations| Functions
    
    style Staff fill:#2563EB,color:#fff
    style Managers fill:#2563EB,color:#fff
    style Directors fill:#2563EB,color:#fff
    style Senior fill:#2563EB,color:#fff
    style HR fill:#2563EB,color:#fff
    style Frontend fill:#374151,color:#fff
    style Auth fill:#374151,color:#fff
    style DB fill:#374151,color:#fff
    style Storage fill:#374151,color:#fff
    style Functions fill:#374151,color:#fff
    style Boundary stroke-dasharray: 5 5
        </div>
        <div class="note">
            <strong>Note:</strong> The Front-End Application is the main entry point. All user interactions go through it, and it communicates with Firebase services (Auth, Firestore, Storage, Functions).
        </div>
    </div>

    <!-- C3: Component Diagram -->
    <div id="c3" class="diagram-container">
        <h2>C3: Component Diagram (Frontend Application Components)</h2>
        <div class="description">
            <strong>Purpose:</strong> Shows how the Front-End Application is decomposed into components and their relationships with external services.
        </div>
        <div class="mermaid">
graph TB
    subgraph FrontendApp["Front-End Application<br/>React/TypeScript/Vite"]
        AuthComp[Authentication Component<br/>AuthProvider, LoginForm, SignUpForm<br/>Handles user authentication flow<br/>Technology: React Context/Hooks]
        
        TaskComp[Task Management Component<br/>TaskService, TaskValidation, TaskCalendar<br/>Manages task CRUD operations,<br/>validation, and calendar view<br/>Technology: React Hooks, Validation Utils]
        
        ProjectComp[Project Management Component<br/>ProjectService, ProjectValidation, ProjectProgress<br/>Manages project CRUD operations<br/>and progress calculation<br/>Technology: React Hooks, Validation Utils]
        
        TeamComp[Team Management Component<br/>TeamService, RBACService, TeamHierarchy<br/>Manages team structure, hierarchy,<br/>and role-based access<br/>Technology: React Hooks, RBAC Utils]
        
        ReportComp[Reporting Component<br/>ReportGenerator, Analytics, PDFExport<br/>Generates reports and analytics<br/>Technology: React Hooks, PDF Utils]
        
        NotifComp[Notification Component<br/>NotificationService, DeadlineNotifications<br/>Handles task deadline notifications<br/>and user notifications<br/>Technology: React Hooks, Firebase Listeners]
    end
    
    AuthExt[Firebase Auth<br/>External Service]
    DBExt[(Firestore<br/>External Database)]
    StorageExt[(Firebase Storage<br/>External Service)]
    FunctionsExt[Firebase Functions<br/>External Service]
    
    AuthComp -->|authenticate| AuthExt
    TaskComp -->|read/write<br/>tasks collection| DBExt
    ProjectComp -->|read/write<br/>projects collection| DBExt
    TeamComp -->|read/write<br/>teams, profiles collections| DBExt
    ReportComp -->|read<br/>aggregate data| DBExt
    ReportComp -->|generate<br/>PDF files| StorageExt
    NotifComp -->|read/write<br/>notifications collection| DBExt
    
    style AuthComp fill:#60A5FA,color:#000
    style TaskComp fill:#60A5FA,color:#000
    style ProjectComp fill:#60A5FA,color:#000
    style TeamComp fill:#60A5FA,color:#000
    style ReportComp fill:#60A5FA,color:#000
    style NotifComp fill:#60A5FA,color:#000
    style AuthExt fill:#374151,color:#fff
    style DBExt fill:#374151,color:#fff
    style StorageExt fill:#374151,color:#fff
    style FunctionsExt fill:#374151,color:#fff
    style FrontendApp stroke-dasharray: 5 5
        </div>
        <div class="note">
            <strong>Note:</strong> Each component is responsible for a specific domain (Authentication, Tasks, Projects, Teams, Reports, Notifications). They communicate with external Firebase services.
        </div>
    </div>

    <!-- C4: Code Diagram -->
    <div id="c4" class="diagram-container">
        <h2>C4: Code Diagram (Task Management Component Structure)</h2>
        <div class="description">
            <strong>Purpose:</strong> Shows how the Task Management Component is implemented as code, including classes, modules, and their relationships.
        </div>
        <div class="mermaid">
graph TB
    subgraph TaskMgmt["Task Management Component"]
        TaskVal[TaskValidation Class<br/>Pure Functions<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>validateTaskData(data)<br/>validateTaskTitle(title)<br/>validateTaskPriority(priority)<br/>validateTaskStatus(status)<br/>sanitizeTaskData(data)<br/>Technology: TypeScript]
        
        TaskSvc[TaskService Class<br/>useFirebaseTasks Hook<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Attributes:<br/>â€¢ tasks[]<br/>â€¢ loading: boolean<br/>â€¢ error: Error | null<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Methods:<br/>â€¢ createTask(data)<br/>â€¢ updateTask(id, data)<br/>â€¢ deleteTask(id)<br/>â€¢ getTasks()<br/>â€¢ getTaskById(id)<br/>Technology: React Hook, Firebase SDK]
        
        RecurVal[RecurrenceValidation Class<br/>Pure Functions<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>validateRecurrenceConfig(config)<br/>calculateRecurringInstances(config)<br/>generateRecurrenceDates(config)<br/>Technology: TypeScript]
        
        TaskCal[TaskCalendar Class<br/>React Component<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Attributes:<br/>â€¢ tasks[]<br/>â€¢ selectedDate: Date<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Methods:<br/>â€¢ renderCalendar()<br/>â€¢ handleDateSelect(date)<br/>â€¢ filterTasksByDate(date)<br/>Technology: React Component]
    end
    
    DB[(Firestore Database<br/>Collections:<br/>â€¢ tasks<br/>â€¢ task_instances<br/>â€¢ notifications)]
    
    TaskVal -->|validates input<br/>before create/update| TaskSvc
    TaskSvc -->|CRUD operations<br/>addDoc, updateDoc, deleteDoc, getDoc| DB
    RecurVal -->|validates recurrence config<br/>before creating recurring tasks| TaskSvc
    TaskCal -->|fetches tasks<br/>uses tasks data| TaskSvc
    TaskSvc -->|creates notifications<br/>on task creation/deadline| DB
    
    style TaskVal fill:#60A5FA,color:#000
    style TaskSvc fill:#60A5FA,color:#000
    style RecurVal fill:#60A5FA,color:#000
    style TaskCal fill:#60A5FA,color:#000
    style DB fill:#374151,color:#fff
    style TaskMgmt stroke-dasharray: 5 5
        </div>
        <div class="note">
            <strong>Note:</strong> TaskValidation and RecurrenceValidation are pure functions (no side effects). TaskService uses React hooks to manage state and Firebase operations. TaskCalendar is a React component that consumes TaskService data.
        </div>
    </div>

    <!-- Additional C4 Diagrams -->
    <div class="diagram-container">
        <h2>C4: Project Management Component Structure</h2>
        <div class="mermaid">
graph TB
    subgraph ProjectMgmt["Project Management Component"]
        ProjVal[ProjectValidation Class<br/>Pure Functions<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>validateProjectData(data)<br/>calculateProjectProgress(tasks)<br/>determineProjectStatus(project)<br/>sanitizeProjectData(data)]
        
        ProjSvc[ProjectService Class<br/>useFirebaseProjects Hook<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Attributes:<br/>â€¢ projects[]<br/>â€¢ loading: boolean<br/>â€¢ error: Error | null<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Methods:<br/>â€¢ createProject(data)<br/>â€¢ updateProject(id, data)<br/>â€¢ deleteProject(id)<br/>â€¢ getProjects()<br/>â€¢ getProjectById(id)]
        
        ProjProg[ProjectProgress Class<br/>Progress Calculation<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>calculateProgress(tasks)<br/>updateProgress(projectId, progress)]
    end
    
    ProjDB[(Firestore Database<br/>Collections:<br/>â€¢ projects<br/>â€¢ tasks)]
    
    ProjVal -->|validates input| ProjSvc
    ProjSvc -->|CRUD operations| ProjDB
    ProjProg -->|calculates progress| ProjSvc
    ProjSvc -->|updates progress| ProjDB
    
    style ProjVal fill:#60A5FA,color:#000
    style ProjSvc fill:#60A5FA,color:#000
    style ProjProg fill:#60A5FA,color:#000
    style ProjDB fill:#374151,color:#fff
    style ProjectMgmt stroke-dasharray: 5 5
        </div>
    </div>

    <div class="diagram-container">
        <h2>C4: Team Management Component Structure</h2>
        <div class="mermaid">
graph TB
    subgraph TeamMgmt["Team Management Component"]
        RBAC[RBACService Class<br/>useFirebaseRBAC Hook<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Attributes:<br/>â€¢ userRole<br/>â€¢ teamHierarchy<br/>â€¢ permissions<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Methods:<br/>â€¢ getManagedTeams(userId)<br/>â€¢ canViewTask(userId, task)<br/>â€¢ canManageTeam(userId, teamId)<br/>â€¢ getTeamDescendants(teamId)<br/>â€¢ checkPermission(userId, action, resource)]
        
        TeamSvc[TeamService Class<br/>useFirebaseTeams Hook<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Methods:<br/>â€¢ createTeam(data)<br/>â€¢ updateTeam(id, data)<br/>â€¢ getTeams()<br/>â€¢ getTeamHierarchy()]
    end
    
    TeamDB[(Firestore Database<br/>Collections:<br/>â€¢ teams<br/>â€¢ profiles)]
    
    RBAC -->|checks permissions| TeamSvc
    TeamSvc -->|CRUD operations| TeamDB
    RBAC -->|reads hierarchy| TeamDB
    
    style RBAC fill:#60A5FA,color:#000
    style TeamSvc fill:#60A5FA,color:#000
    style TeamDB fill:#374151,color:#fff
    style TeamMgmt stroke-dasharray: 5 5
        </div>
    </div>

    <div class="note" style="margin-top: 40px;">
        <strong>ğŸ“ How to Use:</strong>
        <ul>
            <li>This HTML file can be opened in any modern web browser</li>
            <li>The diagrams are rendered using Mermaid.js</li>
            <li>For more detailed specifications, see <code>C4_ARCHITECTURE_DIAGRAMS.md</code></li>
            <li>For professional diagrams, use Draw.io with the specifications provided in the markdown file</li>
        </ul>
    </div>
</body>
</html>

